<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eva Voice Agent - Browser Test Suite</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #0a0a0a;
            color: #e0e0e0;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border-radius: 12px;
        }
        .test-section {
            background: #1e1e1e;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .test-item {
            background: #2a2a2a;
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            border-left: 4px solid #10b981;
        }
        .command {
            font-family: 'Courier New', monospace;
            background: #000;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            color: #10b981;
        }
        .expected {
            color: #60a5fa;
            font-size: 0.9em;
            margin-top: 5px;
        }
        .tool-badge {
            display: inline-block;
            background: #3730a3;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-right: 5px;
        }
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 0.9em;
            font-weight: bold;
        }
        .status.pending { background: #64748b; }
        .status.testing { background: #f59e0b; }
        .status.passed { background: #10b981; }
        .status.failed { background: #ef4444; }
        .controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #1e293b;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        button {
            background: #10b981;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        button:hover {
            background: #059669;
        }
        .test-log {
            background: #000;
            padding: 15px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 0.9em;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }
        .highlight {
            background: #374151;
            padding: 2px 6px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üß† Eva Master Brain - Voice Agent Test Suite</h1>
        <p>Interactive testing for Eva's enhanced capabilities in Talk to Eva page</p>
        <p>Open <a href="http://localhost:3000/dashboard/talk-to-eva" target="_blank" style="color: #10b981;">Talk to Eva</a> in a new tab to start testing</p>
    </div>

    <div class="test-section">
        <h2>üìã Test Progress Tracker</h2>
        <div id="progress">
            <p>Total Tests: <span id="total">0</span> | 
               Completed: <span id="completed">0</span> | 
               Progress: <span id="percentage">0%</span></p>
        </div>
    </div>

    <div class="test-section">
        <h2>1Ô∏è‚É£ Basic Conversation Tests</h2>
        <div class="test-item" data-test-id="1">
            <h3>Context Retention Test</h3>
            <div class="command">Say: "My name is Alex and I work at TechCorp"</div>
            <div class="command">Then say: "What's my name and where do I work?"</div>
            <div class="expected">‚úì Expected: Eva remembers your name and company</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
    </div>

    <div class="test-section">
        <h2>2Ô∏è‚É£ Web Search & Information</h2>
        <div class="test-item" data-test-id="2">
            <h3>Real-time Web Search</h3>
            <div class="command">Say: "Eva, search for the latest AI developments today"</div>
            <div class="expected">‚úì Expected: <span class="tool-badge">search_web</span> tool execution</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
        <div class="test-item" data-test-id="3">
            <h3>Industry Research</h3>
            <div class="command">Say: "What are the current trends in financial advisor recruiting?"</div>
            <div class="expected">‚úì Expected: Current industry information via web search</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
    </div>

    <div class="test-section">
        <h2>3Ô∏è‚É£ Task Management</h2>
        <div class="test-item" data-test-id="4">
            <h3>Create Complex Task</h3>
            <div class="command">Say: "Create a high priority task to review all CFO candidates by Friday at 3 PM"</div>
            <div class="expected">‚úì Expected: <span class="tool-badge">create_task</span> with priority and deadline</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
        <div class="test-item" data-test-id="5">
            <h3>Update Task Status</h3>
            <div class="command">Say: "Update task 123 and mark it as completed"</div>
            <div class="expected">‚úì Expected: <span class="tool-badge">update_task</span> execution</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
    </div>

    <div class="test-section">
        <h2>4Ô∏è‚É£ Email Management</h2>
        <div class="test-item" data-test-id="6">
            <h3>Read Emails</h3>
            <div class="command">Say: "Show me my unread emails from today"</div>
            <div class="expected">‚úì Expected: <span class="tool-badge">read_emails</span> with Microsoft Graph API</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
        <div class="test-item" data-test-id="7">
            <h3>Compose Email</h3>
            <div class="command">Say: "Write an email to sarah@example.com about scheduling our meeting next Tuesday"</div>
            <div class="expected">‚úì Expected: <span class="tool-badge">write_email</span> with draft composition</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
    </div>

    <div class="test-section">
        <h2>5Ô∏è‚É£ Ultra Thinking & Deep Analysis</h2>
        <div class="test-item" data-test-id="8">
            <h3>Strategic Analysis</h3>
            <div class="command">Say: "Use deep thinking to analyze the pros and cons of remote recruiting"</div>
            <div class="expected">‚úì Expected: <span class="tool-badge">execute_workflow</span> with deep-thinking-orchestrator</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
    </div>

    <div class="test-section">
        <h2>6Ô∏è‚É£ Document & Image Processing</h2>
        <div class="test-item" data-test-id="9">
            <h3>Document Analysis</h3>
            <div class="command">Upload a resume PDF, then say: "Analyze this resume and extract key skills"</div>
            <div class="expected">‚úì Expected: Document processing with skill extraction</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
        <div class="test-item" data-test-id="10">
            <h3>Image Understanding</h3>
            <div class="command">Upload a chart/diagram, then say: "What information is shown in this image?"</div>
            <div class="expected">‚úì Expected: Vision analysis using Gemini 2.5 Pro/Flash</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
    </div>

    <div class="test-section">
        <h2>7Ô∏è‚É£ Multi-Tool Orchestration</h2>
        <div class="test-item" data-test-id="11">
            <h3>Complex Workflow</h3>
            <div class="command">Say: "Search for best practices in executive recruiting and create a task to implement them"</div>
            <div class="expected">‚úì Expected: <span class="tool-badge">search_web</span> + <span class="tool-badge">create_task</span></div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
        <div class="test-item" data-test-id="12">
            <h3>Full Recruitment Workflow</h3>
            <div class="command">Say: "Find potential CFO candidates, analyze their profiles, and draft outreach emails"</div>
            <div class="expected">‚úì Expected: Multiple tools including search, analysis, and email composition</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
    </div>

    <div class="test-section">
        <h2>8Ô∏è‚É£ Real-time Monitoring</h2>
        <div class="test-item" data-test-id="13">
            <h3>Set Up Monitoring</h3>
            <div class="command">Say: "Monitor AI recruiting news and notify me of updates"</div>
            <div class="expected">‚úì Expected: <span class="tool-badge">monitor_updates</span> configuration</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
    </div>

    <div class="test-section">
        <h2>9Ô∏è‚É£ Dashboard Navigation</h2>
        <div class="test-item" data-test-id="14">
            <h3>Navigate to Pages</h3>
            <div class="command">Say: "Take me to the deals page"</div>
            <div class="expected">‚úì Expected: <span class="tool-badge">navigate_dashboard</span> to /dashboard/deals</div>
            <div class="status pending">Pending</div>
            <div class="test-log" style="display:none;"></div>
        </div>
    </div>

    <div class="controls">
        <h3>Test Controls</h3>
        <button onclick="markCurrentTest('testing')">üîÑ Testing</button>
        <button onclick="markCurrentTest('passed')">‚úÖ Passed</button>
        <button onclick="markCurrentTest('failed')">‚ùå Failed</button>
        <button onclick="resetTests()">üîÑ Reset All</button>
        <button onclick="exportResults()">üìã Export Results</button>
    </div>

    <script>
        let currentTest = 1;
        const totalTests = 14;

        function updateProgress() {
            const completed = document.querySelectorAll('.status.passed, .status.failed').length;
            document.getElementById('total').textContent = totalTests;
            document.getElementById('completed').textContent = completed;
            document.getElementById('percentage').textContent = Math.round((completed / totalTests) * 100) + '%';
        }

        function markCurrentTest(status) {
            const testItem = document.querySelector(`[data-test-id="${currentTest}"]`);
            if (testItem) {
                const statusEl = testItem.querySelector('.status');
                statusEl.className = `status ${status}`;
                statusEl.textContent = status.charAt(0).toUpperCase() + status.slice(1);
                
                const log = testItem.querySelector('.test-log');
                log.style.display = 'block';
                const timestamp = new Date().toLocaleTimeString();
                log.innerHTML += `<div>[${timestamp}] Test marked as ${status}</div>`;
                
                if (status === 'passed' || status === 'failed') {
                    currentTest++;
                    highlightNextTest();
                }
                updateProgress();
            }
        }

        function highlightNextTest() {
            document.querySelectorAll('.test-item').forEach(item => {
                item.style.border = '';
            });
            const nextTest = document.querySelector(`[data-test-id="${currentTest}"]`);
            if (nextTest) {
                nextTest.style.border = '2px solid #10b981';
                nextTest.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        function resetTests() {
            document.querySelectorAll('.status').forEach(status => {
                status.className = 'status pending';
                status.textContent = 'Pending';
            });
            document.querySelectorAll('.test-log').forEach(log => {
                log.style.display = 'none';
                log.innerHTML = '';
            });
            currentTest = 1;
            updateProgress();
            highlightNextTest();
        }

        function exportResults() {
            const results = [];
            document.querySelectorAll('.test-item').forEach((item, index) => {
                const title = item.querySelector('h3').textContent;
                const status = item.querySelector('.status').textContent;
                const log = item.querySelector('.test-log').innerHTML;
                results.push({
                    id: index + 1,
                    title,
                    status,
                    log
                });
            });
            
            const blob = new Blob([JSON.stringify(results, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `eva-test-results-${new Date().toISOString()}.json`;
            a.click();
        }

        // Initialize
        updateProgress();
        highlightNextTest();

        // Listen for Eva events from the Talk to Eva page
        window.addEventListener('message', (event) => {
            if (event.origin === 'http://localhost:3000') {
                const { type, data } = event.data;
                const testItem = document.querySelector(`[data-test-id="${currentTest}"]`);
                if (testItem) {
                    const log = testItem.querySelector('.test-log');
                    log.style.display = 'block';
                    const timestamp = new Date().toLocaleTimeString();
                    
                    if (type === 'eva-tool-execution') {
                        log.innerHTML += `<div>[${timestamp}] Tool executed: <span class="highlight">${data.toolName}</span></div>`;
                    } else if (type === 'eva-response') {
                        log.innerHTML += `<div>[${timestamp}] Eva responded: "${data.text.substring(0, 50)}..."</div>`;
                    }
                }
            }
        });
    </script>
</body>
</html>